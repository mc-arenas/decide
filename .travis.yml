dist: xenial
services:
- postgresql
addons:
  postgresql: '9.4'
before_script:
- cp decide/local_settings.travis.py decide/local_settings.py
- psql -U postgres -c "create user decide password 'decide'"
- psql -U postgres -c "ALTER USER decide CREATEDB"
- psql -U postgres -c "create database decide owner decide"
language: python
python:
- '3.6'
install:
- pip install -r requirements.txt
- pip install codacy-coverage
script:
- cd decide
- coverage run --branch --source=. ./manage.py test --keepdb
- coverage xml
deploy:
  provider: heroku
  app: despliegueegc
  strategy: git
  api_key:
    secure: gTqBGC0aSb7J9l1QVXuQiU1eWoJaoTnxLPaSBZhKxATS7VNGpHyb0erft2P0hyw9xWMv67arMSaJ73+E0KuMLSkowPxi3Er3tPtgg2jNb4Dui0CPSu/PbzFVaQNiwHJxAPAA9PnUkPbPVva6ckYhyJ43+/Cy0Z0+UsKb7zSzlVc19mPo+8tOKkJg8BZZiXCVMvHR25UqDFSAKq0/F/CKlnasrxV4lKXSNHYVDtSZoJDvQb2Ni38qikiLbWrHYvXeSWY+LSVWi0cDviZoL3vsyNn8XCE0bq99ySXBmqzq4i50WJ7amtZ0CrdDUY/GjEeiRLX/RzaIJ7VCJ4AYHK3iYnbJf3INNaeodu1zUKpQuPyRw/COil9tc8+fXI9VhQWeVJzTgDkHDO4mNq7x55EbPf7WxjwMuAg6xj2YL0jvjjP98m6DvAsATERT1FvGWFOs/YJz15R+KLKnIAJMoA67LaqKeDdelQd1hn2OAD/+S86tct+a+2aBixSsDPOS1gkuqaCc/ilCFgSVMkxl5Z0V+/WlAZRrOkvX4EAXgC/n2F1fbSvz2cmgf1EqGCU/7CheCHdY2qPjV7vzWU9nfIao0QrXLOjHXSFvWnvVIx69Dj3LM0sK/Y9Xrl82OeyJMv3unTdOlirN3L4wniBz6ECE4/eMAoxVuUh/aoCbNVLrzAY=
  on:
    branch: booth-principal
